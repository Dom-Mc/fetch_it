<%= simple_form_for order do |f| %>
  <%= render "form_errors", order: order %>

  <h2>Pickup</h2>
  <%= f.simple_fields_for :shipper, order.shipper do |shipper| %>

    <%= shipper.input :first_name %>
    <%= shipper.input :last_name %>

    <%= shipper.fields_for :address, order.shipper.address do |address| %>
      <%= address.input :address_type, collection: Address.address_types.keys.to_a, selected: "residence" %>
      <%= address.input :street_address %>
      <%= address.input :secondary_address, label: "Apt/Unit/Floor", required: false %>
      <%= address.input :zip %>
    <% end %>

    <%=shipper.fields_for :phone, order.shipper.phone do |phone| %>
      <%= phone.input :phone_type, collection: Phone.phone_types.keys.to_a, selected: 'mobile' %>
      <%= phone.input :phone_number, as: :tel, placeholder: "123-456-7890" %>
      <%= phone.input :ext, as: :tel, required: false %>
    <% end %>
  <% end %>

  <h2>Delivery</h2>
  <%= f.simple_fields_for :recipient, order.recipient do |recipient| %>
    <%= recipient.input :first_name %>
    <%= recipient.input :last_name %>

    <%= recipient.fields_for :address, order.recipient.address do |address| %>
      <%= address.input :address_type, collection: Address.address_types.keys.to_a, selected: "residence" %>
      <%= address.input :street_address %>
      <%= address.input :secondary_address, label: "Apt/Unit/Floor", required: false %>
      <%= address.input :zip %>
    <% end %>

    <%= recipient.fields_for :phone, order.recipient.phone do |phone| %>
      <%= phone.input :phone_type, collection: Phone.phone_types.keys.to_a, selected: 'mobile' %>
      <%= phone.input :phone_number, as: :tel, placeholder: "123-456-7890" %>
      <%= phone.input :ext, as: :tel, required: false %>
    <% end %>
  <% end %>

  <h2>Service</h2>
  <%= f.input :pickup_date, as: :date,  discard_year: true, selected: display_date %>
  <%= f.input :get_pickup_time, label: "Pickup time", selected: display_time, as: :time, minute_step: 10, ampm: true, hint: "Pickup times are available from 8:00am to 3:00pm (PST) daily." %>

  <%= f.input :service_id, collection: Service.all, label_method: :service_name, selected: display_service %>
  <%= f.input :special_instructions, as: :text, hint: 'Maximum 2000 characters.' %>
  <%= f.input :signature_requirement, collection: Order.signature_requirements.to_a, selected: "No Signature", hint: 'Indirect Signature: anyone at address - Direct Signature: only recipient.' %>

  <h2>Shipment</h2>
  <%= f.input :number_of_items, as: :integer %>
  <%= f.input :estimated_weight, label: "Estimated Weight (lbs)", as: :integer %>

  <h2>Billing</h2>
  <%= f.input :shipping_reference, label: "Shipping/Billing reference", hint: 'Maximum 50 characters.' %>

  <%= f.button :submit %>

<% end %>
